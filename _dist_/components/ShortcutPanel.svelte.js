import"./ShortcutPanel.svelte.css.proxy.js";import{SvelteComponent as ve,add_render_callback as me,append as u,attr as a,component_subscribe as ke,destroy_each as he,detach as k,element as _,init as we,insert as h,listen as B,noop as fe,run_all as ce,safe_not_equal as je,select_option as de,select_value as ye,self as Ee,set_data as A,space as L,text as p}from"../../_snowpack/pkg/svelte/internal.js";import{createEventDispatcher as Se,onMount as Ce}from"../../_snowpack/pkg/svelte.js";import Ae from"../../_snowpack/pkg/clipboard.js";import Ie from"../../_snowpack/pkg/base64-js.js";import{_ as Pe}from"../../_snowpack/pkg/svelte-i18n.js";import De from"../config.js";import{MsgStatus as _e,AudioStatus as N}from"../types.js";function pe(l,e,t){const o=l.slice();return o[21]=e[t],o}function Be(l){let e,t=l[0].title+"",o,s,d,c,v,F,f,w,E=l[6]("Play")+"",b,r,y,I,U=l[6]("Download")+"",Y,O,H,G=l[6]("What's this?")+"",z,V,R,m,P,D,g,X=l[6]("Select")+"",x,K,se,T,Q=l[6]("Copy to clipboard")+"",ee,Z,ae,J,te,$=l[6]("Shortcut")+"",le,oe,W,ie,ne,q=l[0].audios,S=[];for(let i=0;i<q.length;i+=1)S[i]=be(pe(l,q,i));function ue(i,n){if(i[5]===N.WAITING_FOR_INPUT)return Le;if(i[5]===N.PENDING)return Re;if(i[5]===N.REJECTED)return Te;if(i[5]===N.COPIED)return Ne}let M=ue(l,-1),C=M&&M(l);return{c(){e=_("b"),o=p(t),s=L(),d=_("div"),c=_("select"),v=_("option"),v.textContent="---";for(let i=0;i<S.length;i+=1)S[i].c();F=L(),f=_("div"),w=_("button"),b=p(E),y=L(),I=_("button"),Y=p(U),H=p(`
          (`),z=p(G),V=L(),R=_("span"),R.innerHTML='<a href="https://youtube.com/watch?v=UARzqq93XPY" target="_blank" rel="noopener noreferrer" class="svelte-2j1tf1">YT</a>/<a href="https://www.bilibili.com/video/av375437164" target="_blank" rel="noopener noreferrer" class="svelte-2j1tf1">BILI</a>',m=p(")"),P=L(),D=_("div"),g=_("button"),x=p(X),se=p(`
          \u2192
          `),T=_("button"),ee=p(Q),ae=p(`
          \u2192
          `),J=_("a"),te=_("button"),le=p($),oe=L(),W=_("div"),C&&C.c(),a(e,"id","title"),a(e,"class","svelte-2j1tf1"),v.__value="",v.value=v.__value,v.selected=!0,a(c,"id","audioSelect"),l[2]===void 0&&me(()=>l[13].call(c)),a(d,"class","svelte-2j1tf1"),a(w,"tabindex","0"),w.disabled=r=l[2]==="",a(w,"class","svelte-2j1tf1"),a(I,"tabindex","0"),I.disabled=O=l[2]==="",a(I,"class","svelte-2j1tf1"),a(R,"id","helpLink"),a(R,"class","svelte-2j1tf1"),a(f,"class","oprBar svelte-2j1tf1"),a(g,"tabindex","0"),g.disabled=K=l[2]==="",a(T,"id","b64copybtn"),a(T,"data-clipboard-text",l[4]),T.disabled=Z=l[2]!==l[3]||l[2]===""||l[4]==="",a(J,"href","https://www.icloud.com/shortcuts/90544f62b04d4ab68a536e55e3d05316"),a(J,"target","_blank"),a(J,"rel","noopener noreferrer"),a(D,"class","svelte-2j1tf1"),a(W,"class","svelte-2j1tf1")},m(i,n){h(i,e,n),u(e,o),h(i,s,n),h(i,d,n),u(d,c),u(c,v);for(let j=0;j<S.length;j+=1)S[j].m(c,null);de(c,l[2]),h(i,F,n),h(i,f,n),u(f,w),u(w,b),u(f,y),u(f,I),u(I,Y),u(f,H),u(f,z),u(f,V),u(f,R),u(f,m),h(i,P,n),h(i,D,n),u(D,g),u(g,x),u(D,se),u(D,T),u(T,ee),u(D,ae),u(D,J),u(J,te),u(te,le),h(i,oe,n),h(i,W,n),C&&C.m(W,null),ie||(ne=[B(c,"change",l[13]),B(w,"click",l[10]),B(w,"keypress",l[10]),B(I,"click",l[9]),B(I,"keypress",l[9]),B(g,"click",l[8]),B(g,"keypress",l[8])],ie=!0)},p(i,n){if(n&1&&t!==(t=i[0].title+"")&&A(o,t),n&1){q=i[0].audios;let j;for(j=0;j<q.length;j+=1){const re=pe(i,q,j);S[j]?S[j].p(re,n):(S[j]=be(re),S[j].c(),S[j].m(c,null))}for(;j<S.length;j+=1)S[j].d(1);S.length=q.length}n&5&&de(c,i[2]),n&64&&E!==(E=i[6]("Play")+"")&&A(b,E),n&5&&r!==(r=i[2]==="")&&(w.disabled=r),n&64&&U!==(U=i[6]("Download")+"")&&A(Y,U),n&5&&O!==(O=i[2]==="")&&(I.disabled=O),n&64&&G!==(G=i[6]("What's this?")+"")&&A(z,G),n&64&&X!==(X=i[6]("Select")+"")&&A(x,X),n&5&&K!==(K=i[2]==="")&&(g.disabled=K),n&64&&Q!==(Q=i[6]("Copy to clipboard")+"")&&A(ee,Q),n&16&&a(T,"data-clipboard-text",i[4]),n&29&&Z!==(Z=i[2]!==i[3]||i[2]===""||i[4]==="")&&(T.disabled=Z),n&64&&$!==($=i[6]("Shortcut")+"")&&A(le,$),M===(M=ue(i,n))&&C?C.p(i,n):(C&&C.d(1),C=M&&M(i),C&&(C.c(),C.m(W,null)))},d(i){i&&k(e),i&&k(s),i&&k(d),he(S,i),i&&k(F),i&&k(f),i&&k(P),i&&k(D),i&&k(oe),i&&k(W),C&&C.d(),ie=!1,ce(ne)}}}function Fe(l){let e=l[6]("Failed to load.")+"",t;return{c(){t=p(e)},m(o,s){h(o,t,s)},p(o,s){s&64&&e!==(e=o[6]("Failed to load.")+"")&&A(t,e)},d(o){o&&k(t)}}}function ge(l){let e=l[6]("Loading...")+"",t;return{c(){t=p(e)},m(o,s){h(o,t,s)},p(o,s){s&64&&e!==(e=o[6]("Loading...")+"")&&A(t,e)},d(o){o&&k(t)}}}function be(l){let e,t=l[21]+"",o,s;return{c(){e=_("option"),o=p(t),e.__value=s=l[21],e.value=e.__value},m(d,c){h(d,e,c),u(e,o)},p(d,c){c&1&&t!==(t=d[21]+"")&&A(o,t),c&1&&s!==(s=d[21])&&(e.__value=s,e.value=e.__value)},d(d){d&&k(e)}}}function Ne(l){let e=l[6]("Copied!")+"",t;return{c(){t=p(e)},m(o,s){h(o,t,s)},p(o,s){s&64&&e!==(e=o[6]("Copied!")+"")&&A(t,e)},d(o){o&&k(t)}}}function Te(l){let e=l[6]("Failed to load.")+"",t;return{c(){t=p(e)},m(o,s){h(o,t,s)},p(o,s){s&64&&e!==(e=o[6]("Failed to load.")+"")&&A(t,e)},d(o){o&&k(t)}}}function Re(l){let e=l[6]("Fetching...")+"",t;return{c(){t=p(e)},m(o,s){h(o,t,s)},p(o,s){s&64&&e!==(e=o[6]("Fetching...")+"")&&A(t,e)},d(o){o&&k(t)}}}function Le(l){let e=l[6]("Select a clip first")+"",t;return{c(){t=p(e)},m(o,s){h(o,t,s)},p(o,s){s&64&&e!==(e=o[6]("Select a clip first")+"")&&A(t,e)},d(o){o&&k(t)}}}function Ue(l){let e,t,o,s,d,c,v,F,f;function w(r,y){return r[1]===_e.PENDING?ge:r[1]===_e.REJECTED?Fe:Be}let E=w(l,-1),b=E(l);return{c(){e=_("div"),t=_("div"),o=_("span"),s=p("\xD7"),c=L(),v=_("div"),b.c(),a(o,"id","modalClose"),a(o,"tabindex","0"),a(o,"aria-label",d=l[6]("Close")),a(o,"class","svelte-2j1tf1"),a(v,"id","modalBody"),a(v,"class","svelte-2j1tf1"),a(t,"id","modalBox"),a(t,"class","svelte-2j1tf1"),a(e,"id","modal"),a(e,"tabindex","0"),a(e,"class","svelte-2j1tf1")},m(r,y){h(r,e,y),u(e,t),u(t,o),u(o,s),u(t,c),u(t,v),b.m(v,null),F||(f=[B(o,"click",l[11]),B(o,"keypress",l[12]),B(e,"click",Ee(l[14])),B(e,"keypress",l[15])],F=!0)},p(r,[y]){y&64&&d!==(d=r[6]("Close"))&&a(o,"aria-label",d),E===(E=w(r,y))&&b?b.p(r,y):(b.d(1),b=E(r),b&&(b.c(),b.m(v,null)))},i:fe,o:fe,d(r){r&&k(e),b.d(),F=!1,ce(f)}}}function Oe(l,e,t){let o,s;ke(l,Pe,m=>t(6,s=m));const d=De.assets_path;let{payload:c}=e,{status:v}=e,F,f="",w="",E="",b="",r=N.WAITING_FOR_INPUT;const y=Se();async function I(){if(w===f)return!0;t(4,b=""),t(5,r=N.PENDING);const m=await fetch(o).then(P=>P.blob()).catch(()=>{t(5,r=N.REJECTED)});return m===void 0?!1:(E=URL.createObjectURL(m),t(3,w=f),t(5,r=N.RESOLVED),!0)}async function U(){if(await I()===!1)return;const P=await fetch(E).then(g=>g.arrayBuffer()),D=new Uint8Array(P);t(4,b=Ie.fromByteArray(D))}async function Y(){if(await I()===!1)return;const P=document.createElement("a");P.href=E,P.setAttribute("download",f),P.click()}async function O(){if(await I()===!1)return;new Audio(E).play()}Ce(()=>{F=new Ae("#b64copybtn"),F.on("success",()=>{const m=r;t(5,r=N.COPIED),setTimeout(()=>{t(5,r=m)},800)})});const H=()=>y("close"),G=()=>y("close");function z(){f=ye(this),t(2,f),t(0,c)}const V=()=>y("close"),R=()=>y("close");return l.$$set=m=>{"payload"in m&&t(0,c=m.payload),"status"in m&&t(1,v=m.status)},l.$$.update=()=>{if(l.$$.dirty&4){e:o=d+f}},[c,v,f,w,b,r,s,y,U,Y,O,H,G,z,V,R]}class Ge extends ve{constructor(e){super();we(this,e,Oe,Ue,je,{payload:0,status:1})}}export default Ge;
